version: '3.8'

services:
  vestaboard:
    build: .
    container_name: vestaboard-local
    restart: unless-stopped
    ports:
      - "8080:8080"
    environment:
      # Required: Vestaboard Local API
      - VESTABOARD_LOCAL_URL=${VESTABOARD_LOCAL_URL}
      - VESTABOARD_LOCAL_KEY=${VESTABOARD_LOCAL_KEY}

      # Optional: Weather
      - OPENWEATHER_API_KEY=${OPENWEATHER_API_KEY:-}
      - WEATHER_LOCATION=${WEATHER_LOCATION:-Seattle,WA,US}

      # Optional: Stocks
      - STOCK_SYMBOLS=${STOCK_SYMBOLS:-SPY,QQQ}

      # Optional: Calendar
      - CALENDAR_URL=${CALENDAR_URL:-}

      # Optional: News
      - NEWS_API_KEY=${NEWS_API_KEY:-}

      # Server config
      - WEB_PORT=8080
      - DB_PATH=/app/data/vestaboard.db
    volumes:
      # Persist database
      - vestaboard_data:/app/data
    networks:
      - vestaboard_net

volumes:
  vestaboard_data:

networks:
  vestaboard_net:
    driver: bridge
